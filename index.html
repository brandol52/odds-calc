<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Odds Calc</title>
<style>
  body{background:#0c111b;color:#edf2f7;font-family:sans-serif;margin:0;padding:20px}
  .card{background:#0f172a;border:1px solid #1f2537;border-radius:12px;padding:12px;margin:12px 0}
  .row{display:flex;gap:8px;align-items:center}
  .col{flex:1;position:relative}
  input{width:100%;padding:8px;border-radius:8px;border:1px solid #333;background:#0b1324;color:#fff;font-size:16px}
  button{padding:8px 12px;border-radius:8px;border:1px solid #333;background:#0b1324;color:#fff}
  .valid{border-color:#2e7d32}
  .invalid{border-color:#ef4444}
  .icon{position:absolute;right:10px;top:35px;font-size:16px}
  .col input.valid ~ .icon::after{content:"✔";color:#22c55e}
  .col input.invalid ~ .icon::after{content:"✖";color:#ef4444}
</style>
</head>
<body>
<h1>Odds Calc</h1>
<div class="card">
  <h2>Stake → Win</h2>
  <div class="row">
    <div class="col">
      <label for="odds">American Odds</label>
      <input id="odds" type="text" inputmode="numeric" placeholder="-110">
      <span class="icon"></span>
    </div>
    <button id="toggleBtn">±</button>
  </div>
  <div class="row">
    <div class="col">
      <label for="win">Target Win ($)</label>
      <input id="win" type="text" inputmode="numeric" value="$0.00">
      <span class="icon"></span>
    </div>
  </div>
  <div>Stake Required: <span id="stakeOut">—</span></div>
  <div>Break-even: <span id="breakeven1">—</span></div>
</div>
<div class="card">
  <h2>Juice / Overround</h2>
  <div class="row">
    <div class="col">
      <label for="sideA">Side A Odds</label>
      <input id="sideA" type="text" inputmode="numeric" placeholder="-110">
      <span class="icon"></span>
    </div>
    <button id="flipA">±</button>
  </div>
  <div class="row">
    <div class="col">
      <label for="sideB">Side B Odds</label>
      <input id="sideB" type="text" inputmode="numeric" placeholder="-110">
      <span class="icon"></span>
    </div>
    <button id="flipB">±</button>
  </div>
  <div>Total Implied: <span id="sumImpl">—</span></div>
  <div>Juice: <span id="juicePct">—</span></div>
  <div>No-Vig Prob: <span id="nvProbs">—</span></div>
  <div>No-Vig Odds: <span id="nvOdds">—</span></div>
</div>
<footer>Built by <strong>Bryan Randol (Pikkit: @Shakademus)</strong> • Build-Seasmoke</footer>
<script>
const $=id=>document.getElementById(id);
const USD=new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'});
const fmtUSD=n=>isNaN(n)?"—":USD.format(n);
const fmtPct=p=>isNaN(p)?"—":(p*100).toFixed(2)+"%";
const fmtOdds=o=>isNaN(o)?"—":(o>0?"+":"")+o;
const americanToProb=o=>(!Number.isFinite(o)||o===0)?NaN:(o>0?100/(o+100):Math.abs(o)/(Math.abs(o)+100));
const probToAmerican=p=>(!(p>0&&p<1))?NaN:(p>0.5?-Math.round(100*p/(1-p)):Math.round(100*(1-p)/p));
const stakeForWin=(o,w)=>(!Number.isFinite(o)||!Number.isFinite(w)||o===0)?NaN:(o>0?(w*100)/o:(w*Math.abs(o))/100);
function sanitizeOdds(el){el.value=(el.value.match(/^[+-]?\d*/)||[""])[0];}
function readOdds(el){return /^[+-]?\d+$/.test(el.value)?Number(el.value):NaN;}
const isValidOdds=n=>Number.isFinite(n)&&Math.abs(n)>=100;
function markValidity(el,ok){el.classList.remove("valid","invalid");el.classList.add(ok?"valid":"invalid");}
function attachMoneyMask(el,onChange){el.dataset.digits=el.dataset.digits||"";el.addEventListener("input",()=>{el.dataset.digits=(el.value||"").replace(/\D/g,"");el.value=USD.format((parseInt(el.dataset.digits||"0",10))/100);onChange();});}
const parseMoney=el=>{const c=parseInt(el.dataset.digits||"0",10);return isNaN(c)?NaN:c/100;};
function calculateStake(){const o=readOdds($("odds")),w=parseMoney($("win"));const okOdds=isValidOdds(o),okWin=(parseInt($("win").dataset.digits||"0",10)>0);markValidity($("odds"),okOdds);markValidity($("win"),okWin);if(!okOdds||!okWin){$("stakeOut").textContent=$("breakeven1").textContent="—";return;}$("stakeOut").textContent=fmtUSD(stakeForWin(o,w));$("breakeven1").textContent=fmtPct(americanToProb(o));}
function calculateJuice(){const a=readOdds($("sideA")),b=readOdds($("sideB"));const aOk=isValidOdds(a),bOk=isValidOdds(b);markValidity($("sideA"),aOk);markValidity($("sideB"),bOk);if(!aOk||!bOk){$("sumImpl").textContent=$("juicePct").textContent=$("nvProbs").textContent=$("nvOdds").textContent="—";return;}const pA=americanToProb(a),pB=americanToProb(b),sum=pA+pB,juice=sum-1;$("sumImpl").textContent=fmtPct(sum);$("juicePct").textContent=fmtPct(juice);if(sum>0){const nvA=pA/sum,nvB=pB/sum;$("nvProbs").textContent=fmtPct(nvA)+" / "+fmtPct(nvB);$("nvOdds").textContent=fmtOdds(probToAmerican(nvA))+" / "+fmtOdds(probToAmerican(nvB));}}
function bind(){attachMoneyMask($("win"),calculateStake);["odds","sideA","sideB"].forEach(id=>{$(id).addEventListener("input",()=>{sanitizeOdds($(id));if(id==="odds")$("sideA").value=$(id).value;calculateStake();calculateJuice();});});$("toggleBtn").addEventListener("click",()=>{const el=$("odds");if(!el.value)return;el.value=el.value.startsWith("-")?el.value.slice(1):(el.value.startsWith("+")?"-"+el.value.slice(1):"-"+el.value);el.dispatchEvent(new Event("input",{bubbles:true}));});$("flipA").addEventListener("click",()=>{const el=$("sideA");if(!el.value)return;el.value=el.value.startsWith("-")?el.value.slice(1):(el.value.startsWith("+")?"-"+el.value.slice(1):"-"+el.value);el.dispatchEvent(new Event("input",{bubbles:true}));});$("flipB").addEventListener("click",()=>{const el=$("sideB");if(!el.value)return;el.value=el.value.startsWith("-")?el.value.slice(1):(el.value.startsWith("+")?"-"+el.value.slice(1):"-"+el.value);el.dispatchEvent(new Event("input",{bubbles:true}));});}
if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",bind);else bind();
</script>
</body>
</html>